<!-- Unified Header Component (StoreHub Version) -->
<link rel="stylesheet" href="/css/header-unified.css?v=<%= Date.now() %>">

<header class="unified-header">
    <div class="unified-header-content">
        <!-- Left Section: Logo + Account -->
        <div class="unified-header-left">
            <a href="/dashboard" class="unified-logo">StoreHub QMS</a>
            <% if (typeof tenant !== 'undefined' && tenant && tenant.slug) { %>
            <div class="unified-account-badge">
                <span class="unified-account-label">Account</span>
                <span class="unified-account-name"><%= tenant.slug %></span>
            </div>
            <% } %>
        </div>

        <!-- Center Section: Navigation -->
        <nav class="unified-nav">
            <a href="/dashboard" 
               class="unified-nav-link <%= typeof activePage !== 'undefined' && activePage === 'dashboard' ? 'active' : '' %>">
                Dashboard
            </a>
            <a href="/dashboard/analytics" 
               class="unified-nav-link <%= typeof activePage !== 'undefined' && activePage === 'analytics' ? 'active' : '' %>">
                Analytics
            </a>
            <a href="/dashboard/settings" 
               class="unified-nav-link <%= typeof activePage !== 'undefined' && activePage === 'settings' ? 'active' : '' %>">
                Settings
            </a>
            <a href="/dashboard/help" 
               class="unified-nav-link <%= typeof activePage !== 'undefined' && activePage === 'help' ? 'active' : '' %>">
                Help
            </a>
        </nav>

        <!-- Right Section: Actions -->
        <div class="unified-header-right">
            <% if (typeof showViewPublic !== 'undefined' && showViewPublic && typeof currentQueueId !== 'undefined' && currentQueueId) { %>
            <a href="/queue/<%= currentQueueId %>/join" target="_blank" class="unified-view-public">
                <i class="bi bi-box-arrow-up-right"></i>
                <span>View Public</span>
            </a>
            <% } %>
            
            <div class="unified-user-dropdown">
                <form action="/auth/logout" method="POST" style="display: inline;">
                    <% if (typeof csrfInput !== 'undefined') { %>
                        <%- csrfInput() %>
                    <% } else if (typeof csrfToken !== 'undefined') { %>
                        <input type="hidden" name="_csrf" value="<%= csrfToken %>">
                    <% } %>
                    <button type="submit" class="unified-user-button">
                        <i class="bi bi-box-arrow-right"></i>
                        <span>Logout</span>
                    </button>
                </form>
            </div>
        </div>
    </div>
</header>